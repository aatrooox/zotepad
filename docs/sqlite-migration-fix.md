# SQLite 迁移问题解决方案

## 问题描述
在项目重构后，旧版本的数据库文件包含了不兼容的迁移记录，导致新版本启动时出现迁移错误：
```
"migration 2 was previously applied but is missing in the resolved migrations"
```

## 解决方案：使用新的数据库文件名

### 1. 更改数据库文件名
- **旧版本**: `sqlite:app.db`  
- **新版本**: `sqlite:app_v2.db`

### 2. 修改位置
- **Rust 后端**: `src-tauri/src/lib.rs` 中的迁移配置
- **前端服务**: `app/composables/useTauriSQL.ts` 中的默认路径

### 3. 优势
- ✅ 完全避免迁移冲突
- ✅ 新版本启动时创建全新数据库
- ✅ 不影响用户使用，因为这是演示数据
- ✅ 简单可靠，无需复杂的迁移逻辑

### 4. 影响
- 旧版本的数据不会被迁移到新版本（符合预期）
- 用户首次使用新版本时会有全新的数据库
- 不会出现迁移相关的错误

## 对生产环境的建议

### 破坏性变更的最佳实践
1. **更改数据库文件名** - 最简单安全的方式
2. **版本号管理** - 在文件名中包含版本信息
3. **清晰的发版说明** - 告知用户这是破坏性更新

### 示例命名规范
```
sqlite:app_v1.db  -> 第一个正式版本
sqlite:app_v2.db  -> 重构后的新版本  
sqlite:app_v3.db  -> 下一个破坏性更新
```

这种方式简单、可靠，且避免了复杂的数据迁移逻辑，特别适合演示项目或者接受破坏性变更的场景。